<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="en">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/blogs/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/blogs/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/blogs/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/blogs/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/blogs/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/blogs/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/blogs/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />




  


  <link rel="alternate" href="/blogs/atom.xml" title="StriveZs的博客" type="application/atom+xml" />






<meta name="description" content="非线性规划研究一个n元实函数在一组等式或不等式的约束条件下的极值问题。 非线性规划函数： 函数fmincon是MatLab最优化工具箱中求解非线性规划问题的函数，它从一个预估值触发，搜索约束条件下非线性多元函数的最小值。 函数fmincon的约束条件为：  其中，x、b、beq、lb和ub是矢量，A和Aeq为矩阵；c（x）和ceq（x）返回矢量的函数；f（x）、c（x）和ceq（x）是非线性函数。">
<meta property="og:type" content="article">
<meta property="og:title" content="基于遗传算法和非线性规划的函数寻优算法">
<meta property="og:url" content="www.strivezs.com/2018/07/15/ji-yu-yi-chuan-suan-fa-he-fei-xian-xing-gui-hua-de-han-shu-xun-you-suan-fa/index.html">
<meta property="og:site_name" content="StriveZs的博客">
<meta property="og:description" content="非线性规划研究一个n元实函数在一组等式或不等式的约束条件下的极值问题。 非线性规划函数： 函数fmincon是MatLab最优化工具箱中求解非线性规划问题的函数，它从一个预估值触发，搜索约束条件下非线性多元函数的最小值。 函数fmincon的约束条件为：  其中，x、b、beq、lb和ub是矢量，A和Aeq为矩阵；c（x）和ceq（x）返回矢量的函数；f（x）、c（x）和ceq（x）是非线性函数。">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://47.100.4.8/wp-content/uploads/2018/07/111.png">
<meta property="og:image" content="http://47.100.4.8/wp-content/uploads/2018/07/112.png">
<meta property="og:image" content="http://47.100.4.8/wp-content/uploads/2018/07/113.png">
<meta property="og:image" content="http://47.100.4.8/wp-content/uploads/2018/07/114.png">
<meta property="og:image" content="http://47.100.4.8/wp-content/uploads/2018/07/115.png">
<meta property="article:published_time" content="2018-07-15T03:37:08.000Z">
<meta property="article:modified_time" content="2018-07-15T03:37:08.000Z">
<meta property="article:author" content="StriveZs">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://47.100.4.8/wp-content/uploads/2018/07/111.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/blogs/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'StriveZs'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="www.strivezs.com/2018/07/15/ji-yu-yi-chuan-suan-fa-he-fei-xian-xing-gui-hua-de-han-shu-xun-you-suan-fa/"/>





  <title>基于遗传算法和非线性规划的函数寻优算法 | StriveZs的博客</title>
  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?5c8bbf815dac51a855060f947b787303";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




<meta name="generator" content="Hexo 4.2.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/blogs/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">StriveZs的博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/blogs/%20" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/blogs/about/%20" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/blogs/tags/%20" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/blogs/categories/%20" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/blogs/archives/%20" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-schedule">
          <a href="/blogs/schedule/%20" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-calendar"></i> <br />
            
            Schedule
          </a>
        </li>
      
        
        <li class="menu-item menu-item-sitemap">
          <a href="/blogs/sitemap.xml%20" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br />
            
            Sitemap
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="www.strivezs.com/blogs/2018/07/15/ji-yu-yi-chuan-suan-fa-he-fei-xian-xing-gui-hua-de-han-shu-xun-you-suan-fa/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="StriveZs">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/blogs/images/avatar.JPG">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="StriveZs的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">基于遗传算法和非线性规划的函数寻优算法</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-07-15T11:37:08+08:00">
                2018-07-15
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blogs/categories/MatLab/" itemprop="url" rel="index">
                    <span itemprop="name">MatLab</span>
                  </a>
                </span>

                
                
                  , 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blogs/categories/MatLab/%E4%BC%98%E5%8C%96%E7%AE%97%E6%B3%95/" itemprop="url" rel="index">
                    <span itemprop="name">优化算法</span>
                  </a>
                </span>

                
                
                  , 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blogs/categories/MatLab/%E4%BC%98%E5%8C%96%E7%AE%97%E6%B3%95/%E5%9F%BA%E4%BA%8E%E9%81%97%E4%BC%A0%E7%AE%97%E6%B3%95%E5%92%8C%E9%9D%9E%E7%BA%BF%E6%80%A7%E8%A7%84%E5%88%92%E7%9A%84%E5%87%BD%E6%95%B0%E5%AF%BB%E4%BC%98%E7%AE%97%E6%B3%95/" itemprop="url" rel="index">
                    <span itemprop="name">基于遗传算法和非线性规划的函数寻优算法</span>
                  </a>
                </span>

                
                
                  , 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blogs/categories/MatLab/%E4%BC%98%E5%8C%96%E7%AE%97%E6%B3%95/%E5%9F%BA%E4%BA%8E%E9%81%97%E4%BC%A0%E7%AE%97%E6%B3%95%E5%92%8C%E9%9D%9E%E7%BA%BF%E6%80%A7%E8%A7%84%E5%88%92%E7%9A%84%E5%87%BD%E6%95%B0%E5%AF%BB%E4%BC%98%E7%AE%97%E6%B3%95/%E6%96%87%E7%AB%A0%E9%A1%B5/" itemprop="url" rel="index">
                    <span itemprop="name">文章页</span>
                  </a>
                </span>

                
                
                  , 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blogs/categories/MatLab/%E4%BC%98%E5%8C%96%E7%AE%97%E6%B3%95/%E5%9F%BA%E4%BA%8E%E9%81%97%E4%BC%A0%E7%AE%97%E6%B3%95%E5%92%8C%E9%9D%9E%E7%BA%BF%E6%80%A7%E8%A7%84%E5%88%92%E7%9A%84%E5%87%BD%E6%95%B0%E5%AF%BB%E4%BC%98%E7%AE%97%E6%B3%95/%E6%96%87%E7%AB%A0%E9%A1%B5/%E7%AE%97%E6%B3%95/" itemprop="url" rel="index">
                    <span itemprop="name">算法</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p><strong>非线性规划研究一个n元实函数在一组等式或不等式的约束条件下的极值问题。</strong></p>
<p>非线性规划函数： 函数fmincon是MatLab最优化工具箱中求解非线性规划问题的函数，它从一个预估值触发，搜索约束条件下非线性多元函数的最小值。 函数fmincon的<strong>约束条件</strong>为： <img src="http://47.100.4.8/wp-content/uploads/2018/07/111.png" alt=""> 其中，<strong>x、b、beq、lb和ub是矢量，A和Aeq为矩阵；c（x）和ceq（x）返回矢量的函数；f（x）、c（x）和ceq（x）是非线性函数。</strong> <strong>函数fmincon（fun，x0，A，b，Aeq，beq，lb，ub）</strong> 其中lb和ub分别为x的下界和上界。当函数输入参数不包括A、b、Aeq、beq时，默认A=0、b=0，Aeq=[ ]，beq=[ ]   遗传算法从随机产生的初始解开始搜索，通过一定的选择、交叉、变异操作逐步迭代以产生新的解。群体种的每个个体代表问题的一个解，成为染色体，染色体的好坏用适应度值来衡量，根据适应度的好快从上一代中选择一定数量的优秀个体，通过交叉、变异来形成下一代群体。经过若干代迭代之后，收敛于最好的染色体。（但不一定是问题的最优解）   非线性规划算法大多采用梯度下降的方法求解，局部搜索能力强，但是全局搜索能力差，遗传算法则是全局搜索能力强，局部搜索能力差，因此二者集合能够得到问题的最优解。   <strong>采用遗传算法和非线性规划的方式求解的例子：</strong> 其中x1、x2、x3、x4、x5是0~0.9*π之间的实数。 该函数的最小值为-2，最小值的位置为（π/2，π/2，π/2，π/2，π/2）   非线性规划遗传算法的流程图： <img src="http://47.100.4.8/wp-content/uploads/2018/07/112.png" alt=""> N为一个固定值，当进化代数为N的倍数时采用非线性寻优的方法加快进化，非线性寻优利用当前染色体值采用函数fmincon寻找问题的局部最优值。   算法思路：</p>
<ol>
<li>种群初始化</li>
</ol>
<p>采用的编码方式有：位串编码、Grey编码、实数编码（浮点数编码）、多级参数编码、有序串编码、结构式编码等。</p>
<ol start="2">
<li>适应度函数</li>
</ol>
<p>因为这个例子中求得是函数最小值所有，把函数值的倒数最为个体的适应度值。目标函数值越小的个体，适应度越大，个体越优。</p>
<ol start="3">
<li>选择操作</li>
</ol>
<p>从旧群体中选择出优良个体组成新的种群，以繁殖到下一代，常用的选择算法有：轮盘赌算法、锦标赛算法等，常用的是轮盘赌算法。即基于适应度比例的选择策略 个体被选中的概率为：<img src="http://47.100.4.8/wp-content/uploads/2018/07/113.png" alt="">，Fi为个体的适应度值</p>
<ol start="4">
<li>交叉操作</li>
</ol>
<p>从种群中随机选择两个个体，通过两个染色体的交换组合，把父串的优秀特征遗传给子串，从而产生新的优秀个体。由于采用实数编码，因此采用实数交叉法：第k个单色提的ak和第L个染色体的al在j位的交叉操作</p>
<ol start="5">
<li>变异操作</li>
</ol>
<p>目的是维护种群的多样性，从种群中随机选择一个个体，选择个体中的一点进行变异以产生更优秀的个体。</p>
<ol start="6">
<li>非线性寻优</li>
</ol>
<p>每进化一定代数后，以所得到的结果为初始值，采用fmincon进行局部寻优，并把局部寻优的结果作为染色体继续进化 <strong>实现：</strong> 计算目标值的函数文件  </p>
<p>function y = fun(x)</p>
<p>y=-5*sin(x(1))*sin(x(2))*sin(x(3))*sin(x(4))*sin(x(5))-sin(5*x(1))*sin(5*x(2))*sin(5*x(3))*sin(5*x(4))*sin(5*x(5))+8;</p>
<p>选择函数</p>
<p>%%选择操作  该函数对每一代种群中的染色体进行选择，以进行后面的交叉和变异</p>
<p>function ret = select(indivduals,sizepop) %indivduals为种群信息   sizepop为种群规模</p>
<p>%indivduals input :种群信息</p>
<p>%sizepop input :种群规模</p>
<p>%opts input :选择方法的选择</p>
<p>%ret output :经过选择后的种群</p>
<p>indivduals.fitness = 1./(indivduals.fitness); %计算适应度</p>
<p>sumfitness = sum(individuals.fitness); %计算适应度之和</p>
<p>sumf = indivduals.fitness./sumfitness;  %计算适应度占比</p>
<p>index = [];   %创建一个空数组 用来存储选择出来的染色体的下标</p>
<p>for i=1:sizepop  %循环sizepop</p>
<pre><code>pick = rand;  %将pick赋值为一个随机小数范围在0-1

while pick == 0  %设置一下防止rand 出来的值使pick为0

    pick = rand;

end

for j = 1 :sizepop %遍历每一个染色体的适应度占比

    pick = pick - sumf(j); %如果pick - 某个染色体的适应度占比小于0 则将该染色体对应的下表添加到index中

    if pick &lt; 0

        index = \[index j\];

        break;

    end

end</code></pre><p>end</p>
<p>indivduals.chrom = indivduals.chrom(index,:);  %将选择出来的染色体存到一个子种群中</p>
<p>indivduals.fitness = indivduals.fitness(index);  %将对应的适应度也存储到一起</p>
<p>ret = indivduals;</p>
<p>交叉操作函数：  </p>
<p>%%交叉操作</p>
<p>function ret = Cross(pl,lenchrom,chrom,sizepop,bound)</p>
<p>%pl input :交叉概率</p>
<p>%lenchrom input :染色体的长度</p>
<p>%chrom input:染色体种群</p>
<p>%sizepop input:种群规模</p>
<p>%ret ouput:交叉后的染色体</p>
<p>for i=1:sizepop     %是否进行交叉由交叉概率决定</p>
<pre><code>%随机选择两个染色体进行交叉

pick = rand(1,2);  %产生两个0-1的随机数

while prod(pick) == 0

    pick = rand(1,2);

end

index = ceil(pick.*sizepop);  %将随机到的数转换为对应的染色体编号  ceil（x）是取比x大的最小整数

%交叉概率决定是否进行交叉

pick  = rand;  %随机出来一个交叉概率

while pick == 0

    pick = rand;

end

%如何随机出来的交叉概率大于给定的交叉概率则结束本次循环

if pick &gt; pcross

    continue;

end

flag = 0;

while flag == 0

    %随机选择交叉位置

    pick = rand;

    while pick ==0

        pick = rand ;

    end

    pos = ceil(pick.*sum(lenchrom));  %将随机出来的数转换为染色体对应的某个基因

    pick = rand;  %随即一个数用于在交叉时选择基因位置时作为参数

    v1 = chrom(index(1),pos);

    v2 = chrom(index(2),pos);

    %交叉公式

    chrom(index(1),pos) = pick * v2 + (1-pick) * v1;

    chrom(index(2),pos) = pick * v1 + (1-pick) * v2;

    flag1 = test(lenchrom,bound,chrom(index(1),:),fcode);

    flag2 = test(lenchrom,bound,chrom(index(2),:),fcode);

    if flag1*flag2 == 0

        flag = 0;

    else

        flag =1;

    end

end</code></pre><p>end</p>
<p>ret = chrom;</p>
<p>变异操作：</p>
<p>%%变异操作</p>
<p>function ret = Mutation(pm,lenchrom,chrom,sizepop,bound)</p>
<p>%本函数完成变异操作</p>
<p>%pcorss input :变异概率</p>
<p>%lenchrom input : 染色体长度</p>
<p>%chrom input:染色体群’</p>
<p>%sizepop input :种群规模</p>
<p>%pop input:当前种群的进化代数和最大的进化代数信息</p>
<p>% ret output:变异后的染色体</p>
<p>for i =1;sizepop</p>
<pre><code>%随机选择一个染色体进行变异

pick = rand;

while pick == 0

    pick = rand;

end

index = ceil(pick * sizepop);  %将随机出来的数转换为对应的染色体的编号

%决定该轮是否进行变异

pick = rand;

if pick &gt; pm

    continue;

end

flag = 0;

while flag == 0

    %随机一个变异位置

    pick = rand;

    while pick == 0

        pick = rand;

    end

    pos = ceil(pick * sum(lenchrom));  %转换为对应染色体基因的位置

    v = chrom(i,pos);  %得到该位置的值

    v1 = v - bound(pos,1);

    v2 = bound(pos,2) - v;

    pick = rand;  %变异开始

    if pick &gt; 0.5  %变异分为两种情况

        delta = v2 * (1 - pick((1 - pop(1)/pop(2))^2));

        chrom (i,pos) = v + delta;

    else

        delta = v1 * (1 - pick((1 - pop(1)/pop(2))^2));

        chrom (i,pos) = v - delta;

    end

    flag = test(lenchrom,bound,chrom(i,:),fcode);

end</code></pre><p>end</p>
<p>ret = chrom;</p>
<p>随机编码函数：</p>
<p>function ret=Code(lenchrom,bound)</p>
<p>%本函数将变量编码成染色体，用于随机初始化一个种群</p>
<p>% lenchrom   input : 染色体长度</p>
<p>% bound      input : 变量的取值范围</p>
<p>% ret        output: 染色体的编码值</p>
<p>flag=0;</p>
<p>while flag==0</p>
<pre><code>pick=rand(1,length(lenchrom));

ret=bound(:,1)&apos;+(bound(:,2)-bound(:,1))&apos;.*pick; %线性插值

flag=test(lenchrom,bound,ret);             %检验染色体的可行性</code></pre><p>end</p>
<p>非线性优化函数：</p>
<p>function ret = nonlinear(chrom,sizepop)</p>
<p>for i=1:sizepop</p>
<pre><code>x=fmincon(inline(&apos;-5\*sin(x(1))\*sin(x(2))\*sin(x(3))\*sin(x(4))\*sin(x(5))-sin(5\*x(1))\*sin(5\*x(2))\*sin(5\*x(3))\*sin(5\*x(4))\*sin(5\*x(5))&apos;),chrom(i,:)&apos;,\[\],\[\],\[\],\[\],\[0 0 0 0 0\],\[2.8274 2.8274 2.8274 2.8274 2.8274\]);

ret(i,:)=x&apos;;</code></pre><p>end</p>
<p>主函数：</p>
<p>%% 清空环境</p>
<p>clc</p>
<p>clear</p>
<p>warning off</p>
<p>%% 遗传算法参数</p>
<p>maxgen=30;                         %进化代数</p>
<p>sizepop=100;                       %种群规模</p>
<p>pcross=[0.6];                      %交叉概率</p>
<p>pmutation=[0.01];                  %变异概率</p>
<p>lenchrom=[1 1 1 1 1];              %变量字串长度</p>
<p>bound=[0 0.9*pi;0 0.9*pi;0 0.9*pi;0 0.9*pi;0 0.9*pi];  %变量范围</p>
<p>%% 个体初始化</p>
<p>individuals=struct(‘fitness’,zeros(1,sizepop), ‘chrom’,[]);  %种群结构体</p>
<p>avgfitness=[];                                               %种群平均适应度</p>
<p>bestfitness=[];                                              %种群最佳适应度</p>
<p>bestchrom=[];                                                %适应度最好染色体</p>
<p>% 初始化种群</p>
<p>for i=1:sizepop</p>
<pre><code>individuals.chrom(i,:)=Code(lenchrom,bound);       %随机产生个体

x=individuals.chrom(i,:);  %得到每一个个体的值

individuals.fitness(i)=fun(x);                     %进行个体适应度的计算</code></pre><p>end</p>
<p>%对初代进行操作   找最好的染色体</p>
<p>[bestfitness bestindex]=min(individuals.fitness);   %得到本代中计算出目标函数值的最小的值</p>
<p>bestchrom=individuals.chrom(bestindex,:);  %得到最好的染色体</p>
<p>avgfitness=sum(individuals.fitness)/sizepop; %计算总染色体的平均适应度</p>
<p>% 记录每一代进化中最好的适应度和平均适应度</p>
<p>trace=[];</p>
<p>%% 进化开始</p>
<p>for i=1:maxgen</p>
<pre><code>% 选择操作

individuals=Select(individuals,sizepop);  %选择出好的个体组成一个种群

avgfitness=sum(individuals.fitness)/sizepop; %计算出子代种群的平均适应度

% 交叉操作

individuals.chrom=Cross(pcross,lenchrom,individuals.chrom,sizepop,bound);

% 变异操作

individuals.chrom=Mutation(pmutation,lenchrom,individuals.chrom,sizepop,\[i maxgen\],bound);



if mod(i,10)==0  %如果进化代数为10的倍数则进行非线性优化

    individuals.chrom=nonlinear(individuals.chrom,sizepop);

end



% 计算进行交叉变异之后的新种群适应度

for j=1:sizepop

    x=individuals.chrom(j,:);

    individuals.fitness(j)=fun(x);

end



%找到最小和最大适应度的染色体及它们在种群中的位置

\[newbestfitness,newbestindex\]=min(individuals.fitness);

\[worestfitness,worestindex\]=max(individuals.fitness);

% 代替上一次进化中最好的染色体

if bestfitness&gt;newbestfitness  %如果上一代中最好的适应度大于当前代中最好的适应度则将它代替

    bestfitness=newbestfitness;

    bestchrom=individuals.chrom(newbestindex,:);

end

individuals.chrom(worestindex,:)=bestchrom;

individuals.fitness(worestindex)=bestfitness;



avgfitness=sum(individuals.fitness)/sizepop;



trace=\[trace;avgfitness bestfitness\]; %记录每一代进化中最好的适应度和平均适应度</code></pre><p>end</p>
<p>%进化结束</p>
<p>%% 结果显示</p>
<p>figure</p>
<p>[r c]=size(trace);</p>
<p>plot([1:r]‘,trace(:,1),’r-‘,[1:r]‘,trace(:,2),’b–’);</p>
<p>title([‘函数值曲线  ‘ ‘终止代数＝’ num2str(maxgen)],’fontsize’,12);</p>
<p>xlabel(‘进化代数’,’fontsize’,12);ylabel(‘函数值’,’fontsize’,12);</p>
<p>legend(‘各代平均值’,’各代最佳值’,’fontsize’,12);</p>
<p>ylim([1.5 8])</p>
<p>disp(‘函数值                   变量’);</p>
<p>% 窗口显示</p>
<p>disp([bestfitness x]);</p>
<p>grid on</p>
<p>  结果： <img src="http://47.100.4.8/wp-content/uploads/2018/07/114.png" alt=""> <img src="http://47.100.4.8/wp-content/uploads/2018/07/115.png" alt=""> 根据数值分析也可以看出随着迭代次数的增加，最好适应度的值变化减小，直道不在变化</p>

      
    </div>
    
    
    

    
      <div>
        <div id="wechat_subscriber" style="display: block; padding: 10px 0; margin: 20px auto; width: 100%; text-align: center">
    <img id="wechat_subscriber_qcode" src="/path/to/your/wechatqcode ex. /uploads/wechat-qcode.jpg" alt="StriveZs wechat" style="width: 200px; max-width: 100%;"/>
    <div>Where is will, there is a way.</div>
</div>

      </div>
    

    

    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/blogs/2018/07/13/shi-yong-yi-chuan-suan-fa-gong-ju-xiang-jie-jue-er-yuan-han-shu-qiu-ji-zhi-wen-ti/" rel="next" title="使用遗传算法工具箱解决二元函数求极值问题">
                <i class="fa fa-chevron-left"></i> 使用遗传算法工具箱解决二元函数求极值问题
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/blogs/2018/07/23/shu-ju-ku-zhi-shi-tu-cao-zuo/" rel="prev" title="数据库之视图操作">
                数据库之视图操作 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/blogs/images/avatar.JPG"
                alt="StriveZs" />
            
              <p class="site-author-name" itemprop="name">StriveZs</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/blogs/archives/%20%7C%7C%20archive">
              
                  <span class="site-state-item-count">252</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                
                  <span class="site-state-item-count">162</span>
                  <span class="site-state-item-name">categories</span>
                
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">1</span>
                  <span class="site-state-item-name">tags</span>
                
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/blogs/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">StriveZs</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/blogs/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/blogs/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/blogs/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/blogs/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/blogs/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/blogs/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/blogs/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/blogs/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/blogs/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/blogs/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/blogs/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/blogs/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/blogs/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
